<!DOCTYPE html>
<html lang="zh">

<head>
  <meta charset="utf-8">
  <title>Three.js and Shadertoy</title>
  <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@threejs">
  <meta name="twitter:title" content="Three.js â€“ and Shadertoy">
  <meta property="og:image" content="https://threejs.org/files/share.png">
  <link rel="shortcut icon" href="../../files/favicon_white.ico" media="(prefers-color-scheme: dark)">
  <link rel="shortcut icon" href="../../files/favicon.ico" media="(prefers-color-scheme: light)">

  <link rel="stylesheet" href="../resources/lesson.css">
  <link rel="stylesheet" href="../resources/lang.css">
  <script type="importmap">
{
  "imports": {
    "three": "../../build/three.module.js"
  }
}
</script>
  <link rel="stylesheet" href="/manual/zh/lang.css">
</head>

<body>
  <div class="container">
    <div class="lesson-title">
      <h1>Three.js ä¸ Shadertoy</h1>
    </div>
    <div class="lesson">
      <div class="lesson-main">
        <p><a href="https://shadertoy.com">Shadertoy</a> æ˜¯ä¸€ä¸ªæœ‰ç€ä¼—å¤šæƒŠè‰³çš„shaderå®è·µçš„è‘—åç½‘ç«™ã€‚ ç»å¸¸æœ‰äººé—®å¦‚ä½•åœ¨ Three.js é‡Œé¢ä½¿ç”¨é‚£äº›shaderã€‚</p>
        <p>é‡è¦çš„æ˜¯è¦çŸ¥é“ï¼Œè¢«ç§°ä½œShader<strong>TOY</strong> äº‹å‡ºæœ‰å› ã€‚ é€šå¸¸ä¸å…¶æŠŠ ShaderToy é‡Œçš„shaderå½“åšæœ€ä½³å®è·µï¼Œä¸å¦‚ç§°å®ƒä»¬æ˜¯æœ‰è¶£çš„æŒ‘æˆ˜ï¼Œæ¯”å¦‚ï¼š<a
            href="https://dwitter.net">dwitter</a> (ä»£ç å°‘äº140 ä¸ªå­—ç¬¦) æˆ–<a href="https://js13kgames.com">js13kGames</a>
          (ç”¨ä¸å¤šäº13kä»£ç åˆ¶ä½œæ¸¸æˆ)ã€‚</p>
        <p>ä½¿ç”¨Shadertoy çš„éš¾é¢˜æ˜¯, <em>ç»™ç‰¹å®šä½ç½®çš„åƒç´ ç€è‰²å†™å‡½æ•°ä»è€Œç»˜åˆ¶æœ‰è¶£çš„å›¾åƒ</em>ã€‚è¿™æ˜¯ä¸€ç§æœ‰è¶£çš„æŒ‘æˆ˜ï¼Œå¾ˆå¤šçš„ç»“æœéå¸¸æƒŠè‰³ã€‚ä½†è¯·æ³¨æ„ï¼Œè¿™å¹¶éæœ€ä½³å®è·µã€‚</p>
        <p>ç‚¹å‡» <a href="https://www.shadertoy.com/view/XtsSWs">è¿™ä¸ªæƒŠè‰³çš„shaderç»˜åˆ¶äº†æ•´ä¸ªåŸå¸‚</a></p>
        <div class="threejs_center"><img src="../resources/images/shadertoy-skyline.png"></div>
        <p>åœ¨æˆ‘çš„GPU ä¸Šå…¨å±è¿è¡Œï¼Œå®ƒçš„è¿è¡Œé€Ÿåº¦ä¸ºæ¯ç§’å¤§çº¦5å¸§ã€‚ä¸<a
            href="https://store.steampowered.com/app/255710/Cities_Skylines/">ã€ŠåŸå¸‚ï¼šå¤©é™…çº¿ã€‹</a>è¿™æ ·çš„æ¸¸æˆå½¢æˆé²œæ˜å¯¹æ¯”ã€‚</p>
        <div class="threejs_center"><img src="../resources/images/cities-skylines.jpg" style="width: 600px;"></div>
        <p>è¿™ä¸ªæ¸¸æˆåœ¨åŒä¸€å°æœºå™¨ä¸Šæ¯ç§’è¿è¡Œ 30-60 å¸§ï¼Œå› ä¸ºå®ƒä½¿ç”¨æ›´å¤š ä¼ ç»ŸæŠ€æœ¯ï¼Œå»ºç­‘ç‰©ç”±ä¸‰è§’å½¢ç»˜åˆ¶è€Œæˆï¼Œå¹¶å¸¦æœ‰çº¹ç†ï¼Œç­‰ç­‰...</p>
        <p>è¨€å½’æ­£ä¼ ï¼Œè®©æˆ‘ä»¬å›åˆ°å¦‚ä½•åœ¨three.jsä½¿ç”¨ Shadertoyçš„shader ã€‚</p>
        <p>å½“ä½ åœ¨ <a href="https://www.shadertoy.com/new">shadertoy.com</a>ä¸Šç‚¹å‡»â€œæ–°å»ºâ€,è¿™æ˜¯ä¸ªåˆå§‹çš„shaderï¼Œè‡³å°‘ 2019 å¹´ 1 æœˆæ˜¯è¿™æ ·çš„ã€‚</p>
        <pre class="prettyprint showlinemods notranslate lang-glsl" translate="no">// By iq: https://www.shadertoy.com/user/iq
// license: Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.
void mainImage( out vec4 fragColor, in vec2 fragCoord )
{
    // Normalized pixel coordinates (from 0 to 1)
    vec2 uv = fragCoord/iResolution.xy;

    // Time varying pixel color
    vec3 col = 0.5 + 0.5*cos(iTime+uv.xyx+vec3(0,2,4));

    // Output to screen
    fragColor = vec4(col,1.0);
}
</pre>
        <p>å…³äºshaderä½ é¦–è¦çŸ¥é“çš„é‡ç‚¹æ˜¯ï¼Œä»–ä»¬æ˜¯ç”¨ä¸€ç§å«åšGLSL (Graphics Library Shading Language)çš„è¯­è¨€å†™æˆçš„ï¼Œè¿™æ˜¯ä¸€ç§ä¸“ä¸º3D æ•°å­¦è®¾è®¡çš„å¼ºç±»å‹è¯­è¨€ã€‚åœ¨ä¸Šé¢æˆ‘ä»¬çœ‹åˆ°<code
            class="notranslate" translate="no">vec4</code>, <code class="notranslate" translate="no">vec2</code>,<code
            class="notranslate" translate="no">vec3</code> è¿™ä¸‰ç§ç‰¹å®šç±»å‹ã€‚ ä¸€ä¸ª <code class="notranslate"
            translate="no">vec2</code> æœ‰2ä¸ªvalue, ä¸€ä¸ª <code class="notranslate" translate="no">vec3</code>
          æœ‰3ä¸ªvalue,ä¸€ä¸ª<code class="notranslate" translate="no">vec4</code> æœ‰4ä¸ª valuesã€‚ä»–ä»¬çš„ä½¿ç”¨æ–¹æ³•éå¸¸çµæ´»ã€‚æœ€å¸¸è§çš„ç”¨æ³•æ˜¯ä½¿ç”¨ <code
            class="notranslate" translate="no">x</code>, <code class="notranslate" translate="no">y</code>, <code
            class="notranslate" translate="no">z</code>, ä»¥åŠ<code class="notranslate" translate="no">w</code> ä¾‹å¦‚ï¼š</p>
        <pre class="prettyprint showlinemods notranslate lang-glsl" translate="no">vec4 v1 = vec4(1.0, 2.0, 3.0, 4.0);
float v2 = v1.x + v1.y;  // adds 1.0 + 2.0
</pre>
        <p>ä¸JavaScriptä¸åŒï¼ŒGLSLæ›´åƒæ˜¯C / C++ï¼Œå…¶ä¸­å˜é‡å¿…é¡»å®šä¹‰ç±»å‹ï¼Œæ‰€ä»¥ä¸èƒ½å†™æˆè¿™æ ·<code class="notranslate" translate="no">var v = 1.2;</code>
          è€Œæ˜¯é€šè¿‡ <code class="notranslate" translate="no">float v = 1.2;</code> å°† <code class="notranslate"
            translate="no">v</code> å£°æ˜ä¸ºæµ®ç‚¹æ•°ã€‚ </p>
        <p>è¯¦è§£ GLSLè¶…å‡ºæœ¬æ–‡èŒƒç•´ã€‚ æ¦‚è§ˆGLSLå¯ä»¥ç‚¹å‡»<a
            href="https://webglfundamentals.org/webgl/lessons/webgl-shaders-and-glsl.html">æœ¬æ–‡</a>
          ï¼Œè¿›é˜¶å¯ä»¥æŸ¥çœ‹ <a href="https://thebookofshaders.com/">æœ¬ç³»åˆ—</a>ã€‚</p>
        <p>æ³¨æ„ï¼Œåœ¨2019 å¹´ 1 æœˆ,
          <a href="https://shadertoy.com">shadertoy.com</a> ä»…å…³æ³¨ <em>fragment
            shaders</em>. Fragment shaderçš„èŒè´£åœ¨äºï¼Œç»™å®šä¸€ä¸ªåƒç´ çš„ä½ç½®ï¼Œè¾“å‡ºè¯¥åƒç´ é¢œè‰²ã€‚
        </p>
        <p>ä¸Šé¢çš„ä»£ç æˆ‘ä»¬çœ‹åˆ° shader æœ‰ä¸€ä¸ª<code class="notranslate" translate="no">out</code> ä¿®é¥°çš„å«<code class="notranslate"
            translate="no">fragColor</code>çš„å‚æ•°ã€‚<code class="notranslate" translate="no">out</code> ä»£è¡¨ <code
            class="notranslate" translate="no">output</code>ã€‚è¿™ä¸ªå‚æ•°å‘å‡½æ•°ä¼ é€’å‚æ•°ã€‚æˆ‘ä»¬éœ€è¦å°†å…¶è®¾ç½®ä¸ºæŸç§é¢œè‰²ã€‚</p>
        <p>å®ƒä¹Ÿæœ‰ä¸€ä¸ª å« <code class="notranslate" translate="no">fragCoord</code>çš„<code class="notranslate"
            translate="no">in</code> (ä»£è¡¨ input)å‚æ•°ã€‚ è¿™ä»£è¡¨äº†å°†è¦ç»˜åˆ¶çš„åƒç´ åæ ‡ã€‚åŸºäºåæ ‡æˆ‘ä»¬å¯ä»¥ç”Ÿæˆç‰¹å®šé¢œè‰²ã€‚ å¦‚æœcanvasæœ‰ 400x300 åƒç´ ï¼Œé‚£ä¹ˆå‡½æ•°å°†ä¼šè¢«è°ƒç”¨ 400x300
          æ¬¡æˆ–è€…è¯´æ˜¯ 120,000 æ¬¡ã€‚ æ¯æ¬¡ <code class="notranslate" translate="no">fragCoord</code> éƒ½æ˜¯ä¸€ä¸ªä¸åŒçš„åƒç´ åæ ‡ã€‚</p>
        <p>è¿˜æœ‰ 2 ä¸ªæ­£åœ¨ä½¿ç”¨ä½†æœªåœ¨ä»£ç ä¸­å®šä¹‰çš„å˜é‡ï¼Œ ä¸€æ˜¯
          <code class="notranslate" translate="no">iResolution</code>ã€‚ è¯¥å‚æ•°è®¾ç½® canvasåˆ†è¾¨ç‡ ã€‚è‹¥è¯¥å‚æ•°è®¾ç½®ä¸º
          400x300 åˆ™ <code class="notranslate" translate="no">iResolution</code> æ˜¯ 400,300 ã€‚éšç€åƒç´ å€¼
          åœ¨400,300å˜åŒ– <code class="notranslate" translate="no">uv</code> å°†åœ¨textureçš„çºµæ¨ªä¸¤ä¸ªæ–¹å‘ä» 0.0 to 1.0 å˜åŒ–ã€‚ ä½¿ç”¨
          <em>è§„èŒƒåŒ–</em> å€¼èƒ½ç®€åŒ–å·¥ä½œï¼Œè€Œä¸” shadertoyä¸Šå¤§éƒ¨åˆ†çš„
          shadersä¹Ÿä»¥ç±»ä¼¼æ–¹å¼å¼€å§‹ã€‚
        </p>
        <p>shaderä¸­å¦ä¸€ä¸ªæœªå®šä¹‰çš„å‚æ•°æ˜¯ <code class="notranslate" translate="no">iTime</code>ã€‚ è¯¥å‚æ•°ä»£è¡¨é¡µé¢åŠ è½½åçš„ç§’æ•°ã€‚</p>
        <p>ä¸Šé¢è¿™ä¿©å…¨å±€å˜é‡åœ¨shaderæœ¯è¯­ä¸­è¢«ç§°ä¸º <em>uniform</em> å˜é‡ã€‚ ä¹‹æ‰€ä»¥è¢«ç§°ä¸º <em>uniform</em>
          åœ¨äºè¿™äº›å˜é‡åœ¨shaderçš„ä¸€æ¬¡è°ƒç”¨ä¸­ä¿æŒuniformï¼ˆç»Ÿä¸€ï¼‰ï¼Œç›´åˆ°ä¸‹ä¸€æ¬¡shaderè°ƒç”¨ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™äº›å‚æ•°éƒ½æ˜¯åœ¨shadertoyå®šä¹‰çš„ç‰¹å®šå˜é‡ï¼Œ è€ŒéGLSL<em>å®˜æ–¹</em>
          å˜é‡ã€‚è¿™ä¿©å˜é‡æ˜¯å‘æ˜shadertoyçš„äººå®šä¹‰çš„ã€‚</p>
        <p>è¿™ç¯‡ <a href="https://www.shadertoy.com/howto">Shadertoy æ–‡æ¡£</a>ä¸­æœ‰æ›´å¤šå®šä¹‰ã€‚ ç°åœ¨è®©æˆ‘ä»¬ä¸€èµ·æ¥å†™ç‚¹ä»£ç æ¥æ“ä½œä¸Šé¢ä¿©shaderå‚æ•°ã€‚</p>
        <p>é¦–å…ˆæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå¡«å……canvasçš„planeã€‚
          å‚è€ƒè¿™ç¯‡<a href="backgrounds.html">å…³äºèƒŒæ™¯çš„æ–‡ç« </a>ã€‚
          æˆ‘ä»¬ä»¥è¿™ç¯‡æ–‡ç« å¼€å§‹ï¼Œä¸è¿‡è¦å…ˆåˆ æ‰cubeã€‚ä»£ç å¾ˆç®€å•ï¼Œå¦‚ä¸‹ï¼š</p>
        <pre class="prettyprint showlinemods notranslate lang-js" translate="no">function main() {
  const canvas = document.querySelector('#c');
  const renderer = new THREE.WebGLRenderer({antialias: true, canvas});
  renderer.autoClearColor = false;

  const camera = new THREE.OrthographicCamera(
    -1, // left
     1, // right
     1, // top
    -1, // bottom
    -1, // near,
     1, // far
  );
  const scene = new THREE.Scene();
  const plane = new THREE.PlaneGeometry(2, 2);
  const material = new THREE.MeshBasicMaterial({
      color: 'red',
  });
  scene.add(new THREE.Mesh(plane, material));

  function resizeRendererToDisplaySize(renderer) {
    const canvas = renderer.domElement;
    const width = canvas.clientWidth;
    const height = canvas.clientHeight;
    const needResize = canvas.width !== width || canvas.height !== height;
    if (needResize) {
      renderer.setSize(width, height, false);
    }
    return needResize;
  }

  function render() {
    resizeRendererToDisplaySize(renderer);

    renderer.render(scene, camera);

    requestAnimationFrame(render);
  }

  requestAnimationFrame(render);
}

main();
</pre>
        <p>æ­£å¦‚<a href="backgrounds.html">å…³äºèƒŒæ™¯çš„æ–‡ç« </a>æ‰€è§£é‡Šï¼Œè¿™äº›å‚æ•°å°†å®šä¹‰
          <a href="/docs/#api/en/cameras/OrthographicCamera"><code class="notranslate"
              translate="no">OrthographicCamera</code></a> ä»¥åŠä¸€ä¸ªå¤§å°æ˜¯2ä¸ªå•ä½ä¸”è¢«canvaså¡«å……çš„planeã€‚
          å½“å‰æˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªçº¢è‰²çš„canvasï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯çº¢è‰²
          <a href="/docs/#api/en/materials/MeshBasicMaterial"><code class="notranslate"
              translate="no">MeshBasicMaterial</code></a>æè´¨ã€‚
        </p>
        <p></p>
        <div translate="no" class="threejs_example_container notranslate">
          <div><iframe class="threejs_example notranslate" translate="no" style=" "
              src="/manual/examples/resources/editor.html?url=/manual/examples/shadertoy-prep.html"></iframe></div>
          <a class="threejs_center" href="/manual/examples/shadertoy-prep.html" target="_blank">ç‚¹å‡»æ­¤å¤„åœ¨æ–°æ ‡ç­¾é¡µä¸­æ‰“å¼€</a>
        </div>

        <p></p>
        <p>ç°åœ¨æˆ‘ä»¬æ·»åŠ shadertoy shaderã€‚ </p>
        <pre class="prettyprint showlinemods notranslate lang-js" translate="no">const fragmentShader = `
#include &lt;common&gt;

uniform vec3 iResolution;
uniform float iTime;

// By iq: https://www.shadertoy.com/user/iq
// license: Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.
void mainImage( out vec4 fragColor, in vec2 fragCoord )
{
    // Normalized pixel coordinates (from 0 to 1)
    vec2 uv = fragCoord/iResolution.xy;

    // Time varying pixel color
    vec3 col = 0.5 + 0.5*cos(iTime+uv.xyx+vec3(0,2,4));

    // Output to screen
    fragColor = vec4(col,1.0);
}

void main() {
  mainImage(gl_FragColor, gl_FragCoord.xy);
}
`;
</pre>
        <p>ä¸Šé¢æˆ‘ä»¬å®šä¹‰äº†åˆšåˆšæåˆ°çš„2ä¸ªuniformå˜é‡ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å…³æ³¨ä»shadertoyé‡Œçš„shader GLSLä»£ç ã€‚æˆ‘ä»¬è°ƒç”¨
          <code class="notranslate" translate="no">mainImage</code> ï¼ŒåŒæ—¶ä¼ é€’
          <code class="notranslate" translate="no">gl_FragColor</code> å’Œ <code class="notranslate"
            translate="no">gl_FragCoord.xy</code>ã€‚ <code class="notranslate" translate="no">gl_FragColor</code>
          æ˜¯ä¸€ä¸ªWebGLå®˜æ–¹
          å…¨å±€å˜é‡ï¼Œä»£è¡¨å½“å‰åƒç´ çš„é¢œè‰²ã€‚<code class="notranslate" translate="no">gl_FragCoord</code> æ˜¯å¦ä¸€ä¸ªWebGLå®˜æ–¹
          å…¨å±€å˜é‡ï¼Œä»£è¡¨å½“å‰ç€è‰²åƒç´ çš„åæ ‡ã€‚
        </p>
        <p>ç„¶åè®¾ç½®three.js uniformsï¼Œä»¥ä¾¿æ§åˆ¶shaderå‚æ•°ã€‚ </p>
        <pre class="prettyprint showlinemods notranslate lang-js" translate="no">const uniforms = {
  iTime: { value: 0 },
  iResolution:  { value: new THREE.Vector3() },
};
</pre>
        <p>åœ¨THREE.jsçš„æ¯ä¸ªuniforméƒ½æœ‰ <code class="notranslate" translate="no">value</code> å‚æ•°ã€‚è¯¥å‚æ•°å¿…é¡»ä¸shaderä¸­çš„uniformç±»å‹åŒ¹é…ã€‚</p>
        <p>ç„¶åæˆ‘ä»¬æŠŠfragmentshaderå’Œuniformséƒ½ä¼ é€’ç»™
          <a href="/docs/#api/en/materials/ShaderMaterial"><code class="notranslate"
              translate="no">ShaderMaterial</code></a>ã€‚
        </p>
        <pre class="prettyprint showlinemods notranslate lang-js" translate="no">-const material = new THREE.MeshBasicMaterial({
-    color: 'red',
-});
+const material = new THREE.ShaderMaterial({
+  fragmentShader,
+  uniforms,
+});
</pre>
        <p>åœ¨æ¸²æŸ“å‰ï¼Œéœ€è¦å…ˆè®¾ç½®uniformsçš„å€¼ã€‚
        </p>
        <pre class="prettyprint showlinemods notranslate lang-js" translate="no">-function render() {
+function render(time) {
+  time *= 0.001;  // convert to seconds

  resizeRendererToDisplaySize(renderer);

+  const canvas = renderer.domElement;
+  uniforms.iResolution.value.set(canvas.width, canvas.height, 1);
+  uniforms.iTime.value = time;

  renderer.render(scene, camera);

  requestAnimationFrame(render);
}
</pre>
        <blockquote>
          <p>æ³¨æ„ï¼š
            ä¸æ¸…æ¥šä¸ºä½•<code class="notranslate" translate="no">iResolution</code>æ˜¯ä¸ª<code class="notranslate"
              translate="no">vec3</code>,è€Œä¸”
            <a href="https://www.shadertoy.com/howto">shadertoy.com</a>ä¸Šçš„æ–‡æ¡£ä¹Ÿæ²¡æœ‰è¯´æ˜ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯å•¥ï¼Œåœ¨ä¸Šé¢æ²¡æœ‰ç”¨åˆ°ç¬¬ä¸‰ä¸ªå‚æ•°æ‰€ä»¥æš‚æ—¶è®¾ç½®ä¸º1ã€‚Â¯\_(ãƒ„)_/Â¯
          </p>
        </blockquote>
        <p></p>
        <div translate="no" class="threejs_example_container notranslate">
          <div><iframe class="threejs_example notranslate" translate="no" style=" "
              src="/manual/examples/resources/editor.html?url=/manual/examples/shadertoy-basic.html"></iframe></div>
          <a class="threejs_center" href="/manual/examples/shadertoy-basic.html" target="_blank">ç‚¹å‡»æ­¤å¤„åœ¨æ–°æ ‡ç­¾é¡µä¸­æ‰“å¼€</a>
        </div>

        <p></p>
        <p>ä¸Šé¢å®šä¹‰çš„æ–°shaderæ•ˆæœä¸æˆ‘ä»¬åœ¨ <a href="https://www.shadertoy.com/new">Shadertoy</a>ä¸Šçœ‹åˆ°çš„åŒ¹é…ï¼Œ
          è‡³å°‘ 2019 å¹´ 1 æœˆæ˜¯è¿™æ ·çš„ ğŸ˜‰ã€‚è¿™ä¸ªshaderåšäº†äº›å•¥ï¼Ÿ </p>
        <ul>
          <li><code class="notranslate" translate="no">uv</code> ä»0å˜åˆ°1ã€‚</li>
          <li><code class="notranslate" translate="no">cos(uv.xyx)</code>å¾—åˆ°3ä¸ªcoså€¼ï¼Œä»¥<code class="notranslate"
              translate="no">vec3</code>å½¢å¼è¾“å‡ºï¼Œä¸€ä¸ªæ˜¯<code class="notranslate" translate="no">uv.x</code>çš„coså€¼, ä¸€ä¸ªæ˜¯<code
              class="notranslate" translate="no">uv.y</code>çš„coså€¼ï¼Œæœ€åæ˜¯<code class="notranslate"
              translate="no">uv.x</code>çš„coså€¼ã€‚</li>
          <li>å‚æ•°ä¸­åŠ ä¸Šæ—¶é—´ <code class="notranslate" translate="no">cos(iTime+uv.xyx)</code>å½¢æˆåŠ¨ç”»ã€‚</li>
          <li>å¦å¤–<code class="notranslate" translate="no">vec3(0,2,4)</code>å‚æ•°ä¸<code class="notranslate"
              translate="no">cos(iTime+uv.xyx+vec3(0,2,4))</code> æ±‚å’Œä½¿cosæ³¢åç§»ã€‚</li>
          <li><code class="notranslate" translate="no">cos</code> è¾“å‡ºå€¼èŒƒå›´ä»-1åˆ°1ï¼Œæ‰€ä»¥ç»è¿‡<code class="notranslate"
              translate="no">0.5 * 0.5 + cos(...)</code>ä»-1 &lt;-&gt; 1 å˜ä¸º 0.0 &lt;-&gt; 1.0</li>
          <li>è®¡ç®—ç»“æœä½œä¸ºRGBé¢œè‰²èµ‹äºˆå½“å‰åƒç´ ã€‚</li>
        </ul>
        <p>ä¸ºäº†æ›´å®¹æ˜“çœ‹å‡ºcosæ³¢å½¢æˆ‘ä»¬ç¨å¾®è°ƒæ•´ä¸€ä¸‹ä»£ç ã€‚å½“å‰<code class="notranslate" translate="no">uv</code>
          ä»…èƒ½ä»0åˆ°1ï¼Œå› cosæ³¢å½¢åœ¨2Ï€å¤„é‡å¤ï¼Œæˆ‘ä»¬é€šè¿‡å°†uvä¹˜ä¸Š40ï¼Œå®ç°cosæ³¢å½¢ä»0åˆ°40çš„å˜åŒ–ï¼Œè¿™å°†ä¼šä½¿cosæ³¢å½¢é‡å¤å¤§çº¦6.3æ¬¡ã€‚</p>
        <pre class="prettyprint showlinemods notranslate lang-glsl" translate="no">-vec3 col = 0.5 + 0.5*cos(iTime+uv.xyx+vec3(0,2,4));
+vec3 col = 0.5 + 0.5*cos(iTime+uv.xyx*40.0+vec3(0,2,4));
</pre>
        <p>å¦‚ä¸‹æˆ‘æ•°äº†ä¸‹å¤§çº¦æ˜¯é‡å¤äº†6.3æ¬¡ï¼Œé€šè¿‡ <code class="notranslate"
            translate="no">+vec3(0,2,4)</code>åç§»äº†4å› æ­¤æˆ‘ä»¬èƒ½çœ‹åˆ°çº¢è“ç›¸é—´ï¼Œå¦åˆ™æˆ‘ä»¬å°†çœ‹åˆ°çº¢è“é¢œè‰²æ··åˆä¸ºç´«è‰²ã€‚</p>
        <p></p>
        <div translate="no" class="threejs_example_container notranslate">
          <div><iframe class="threejs_example notranslate" translate="no" style=" "
              src="/manual/examples/resources/editor.html?url=/manual/examples/shadertoy-basic-x40.html"></iframe></div>
          <a class="threejs_center" href="/manual/examples/shadertoy-basic-x40.html" target="_blank">ç‚¹å‡»æ­¤å¤„åœ¨æ–°æ ‡ç­¾é¡µä¸­æ‰“å¼€</a>
        </div>

        <p></p>
        <p>äº†è§£åˆ°è¾“å…¥å¦‚æ­¤ç®€å•ï¼Œå½“çœ‹åˆ°å¦‚
          <a href="https://www.shadertoy.com/view/MdXGW2">a city canal</a>,
          <a href="https://www.shadertoy.com/view/4ttSWf">a forest</a>,
          <a href="https://www.shadertoy.com/view/ld3Gz2">a snail</a>,
          <a href="https://www.shadertoy.com/view/4tBXR1">a
            mushroom</a>è¿™äº›ç»“æœï¼Œè®©äººæ›´è§‰å¾—å……æ»¡æŒ‘æˆ˜ã€‚å¹¸è¿çš„æ˜¯è¿™ä¹Ÿæ¸…æ™°çš„è¯´æ˜ä¸ºä½•ç›¸å¯¹äºä¼ ç»Ÿçš„ä¸‰è§’å½¢æ„æˆçš„åœºæ™¯ï¼Œè¿™é€šå¸¸è¿™ä¸æ˜¯æ­£ç¡®çš„æ–¹å¼ã€‚å› ä¸ºæ¯ä¸ªåƒç´ é¢œè‰²éƒ½éœ€è¦ç»è¿‡è®¸å¤šæ•°å­¦è®¡ç®—ï¼Œé€šå¸¸ä¼šå¯¼è‡´è¿è¡Œç¼“æ…¢ã€‚
        </p>
        <p>æœ‰äº›shadertoyçš„shadersä½¿ç”¨çº¹ç†è´´å›¾ä½œä¸ºè¾“å…¥ï¼Œæ¯”å¦‚<a href="https://www.shadertoy.com/view/MsXSzM">è¿™ä¸ª</a>ã€‚</p>
        <pre class="prettyprint showlinemods notranslate lang-glsl" translate="no">// By Daedelus: https://www.shadertoy.com/user/Daedelus
// license: Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.
#define TIMESCALE 0.25
#define TILES 8
#define COLOR 0.7, 1.6, 2.8

void mainImage( out vec4 fragColor, in vec2 fragCoord )
{
    vec2 uv = fragCoord.xy / iResolution.xy;
    uv.x *= iResolution.x / iResolution.y;

    vec4 noise = texture2D(iChannel0, floor(uv * float(TILES)) / float(TILES));
    float p = 1.0 - mod(noise.r + noise.g + noise.b + iTime * float(TIMESCALE), 1.0);
    p = min(max(p * 3.0 - 1.8, 0.1), 2.0);

    vec2 r = mod(uv * float(TILES), 1.0);
    r = vec2(pow(r.x - 0.5, 2.0), pow(r.y - 0.5, 2.0));
    p *= 1.0 - pow(min(1.0, 12.0 * dot(r, r)), 2.0);

    fragColor = vec4(COLOR, 1.0) * p;
}
</pre>
        <p>ç»™shaderä¼ é€’çº¹ç†ä¸<a href="textures.html">ç»™å¸¸è§„æè´¨ä¼ é€’çº¹ç†</a>ä¸€æ ·ï¼Œåªä¸è¿‡éœ€è¦é€šè¿‡uniformsæ¥è®¾ç½®çº¹ç†ã€‚</p>
        <p>é¦–å…ˆéœ€è¦ç»™shaderæ·»åŠ ä¸€ä¸ªçº¹ç†çš„uniformã€‚åœ¨GLSLä¸­å¯¹åº”ä¸º
          <code class="notranslate" translate="no">sampler2D</code> ã€‚
        </p>
        <pre class="prettyprint showlinemods notranslate lang-js" translate="no">const fragmentShader = `
#include &lt;common&gt;

uniform vec3 iResolution;
uniform float iTime;
+uniform sampler2D iChannel0;

...
</pre>
        <p>ç„¶åæˆ‘ä»¬å¯ä»¥åƒ<a href="textures.html">è¿™é‡Œ</a>ä¸€æ ·è½½å…¥çº¹ç†ï¼Œå¹¶ä¸”è®¾ç½®uniformçš„å€¼ã€‚</p>
        <pre class="prettyprint showlinemods notranslate lang-js" translate="no">+const loader = new THREE.TextureLoader();
+const texture = loader.load('resources/images/bayer.png');
+texture.minFilter = THREE.NearestFilter;
+texture.magFilter = THREE.NearestFilter;
+texture.wrapS = THREE.RepeatWrapping;
+texture.wrapT = THREE.RepeatWrapping;
const uniforms = {
  iTime: { value: 0 },
  iResolution:  { value: new THREE.Vector3() },
+  iChannel0: { value: texture },
};
</pre>
        <p></p>
        <div translate="no" class="threejs_example_container notranslate">
          <div><iframe class="threejs_example notranslate" translate="no" style=" "
              src="/manual/examples/resources/editor.html?url=/manual/examples/shadertoy-bleepy-blocks.html"></iframe>
          </div>
          <a class="threejs_center" href="/manual/examples/shadertoy-bleepy-blocks.html"
            target="_blank">ç‚¹å‡»æ­¤å¤„åœ¨æ–°æ ‡ç­¾é¡µä¸­æ‰“å¼€</a>
        </div>

        <p></p>
        <p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä¸€ç›´ç”¨<a href="https://shadertoy.com">Shadertoy.com</a>ä¸Šçš„æ–¹å¼ä½¿ç”¨ Shadertoy
          shaders,å³åœ¨canvasä¸Šç»˜åˆ¶shaderã€‚ä½†æˆ‘ä»¬æ— éœ€å—é™äºæ­¤ã€‚è¯·ç•™æ„ï¼Œé€šå¸¸äººä»¬åœ¨Shadertoyä¸Šå†™çš„å‡½æ•°ä»…è¾“å…¥ä¸€ä¸ª<code class="notranslate"
            translate="no">fragCoord</code> å’Œä¸€ä¸ª<code class="notranslate" translate="no">iResolution</code>å‚æ•°ã€‚<code
            class="notranslate" translate="no">fragCoord</code> ä¸ä¸€å®šæ¥è‡ªåƒç´ åæ ‡ï¼Œåƒçº¹ç†åæ ‡ä¹Ÿå¯ä»¥ï¼Œç„¶åå°±å¯ä»¥åƒå¸¸è§„çš„çº¹ç†ä¸€æ ·ä½¿ç”¨ã€‚é€šå¸¸æŠŠè¿™ç§é€šè¿‡å‡½æ•°ç”Ÿæˆçº¹ç†çš„æŠ€æœ¯å«åš<a
            href="https://www.google.com/search?q=procedural+texture"><em>procedural texture</em></a>ã€‚</p>
        <p>è®©æˆ‘ä»¬æ”¹ä¸€æ”¹ä¸Šé¢çš„shaderï¼Œæœ€ç®€å•çš„è«è¿‡äºä½¿ç”¨three.jsæä¾›çš„çº¹ç†åæ ‡ï¼Œä¹˜ä¸Š<code class="notranslate"
            translate="no">iResolution</code>å†ä¼ åˆ°<code class="notranslate" translate="no">fragCoords</code>ã€‚</p>
        <p>æˆ‘ä»¬éœ€è¦åŠ ä¸€ä¸ª<em>varying</em>å˜é‡ã€‚varingå˜é‡é€šè¿‡å¯¹é¡¶ç‚¹è¿›è¡Œæ’å€¼ï¼ˆä¹Ÿå«variedï¼‰å®ç°ä»vertex shaderä¼ å€¼åˆ°fragment shaderã€‚åœ¨fragment
          shaderä¸­ä½¿ç”¨ä¹‹å‰éœ€è¦å…ˆå£°æ˜è¯¥å˜é‡ã€‚è¿™ä¸ªå˜é‡åä¸­çš„ <code class="notranslate" translate="no">uv</code>ä»£è¡¨çº¹ç†åæ ‡ï¼Œå‰é¢çš„<code
            class="notranslate" translate="no">v</code>ä»£è¡¨<em>varying</em>ã€‚</p>
        <pre class="prettyprint showlinemods notranslate lang-glsl" translate="no">...

+varying vec2 vUv;

void main() {
-  mainImage(gl_FragColor, gl_FragCoord.xy);
+  mainImage(gl_FragColor, vUv * iResolution.xy);
}
</pre>
        <p>ç„¶åæˆ‘ä»¬éœ€è¦å®ç°vertex shaderï¼Œä¸‹é¢æ˜¯æœ€ç®€åŒ–çš„three.jsçš„vertex shaderã€‚three.jsä¸­å®šä¹‰äº†<code class="notranslate"
            translate="no">uv</code>ï¼Œ<code class="notranslate" translate="no">projectionMatrix</code>ï¼Œ<code
            class="notranslate" translate="no">modelViewMatrix</code>ï¼Œå’Œ <code class="notranslate"
            translate="no">position</code>è¿™å‡ ä¸ªå‚æ•°ï¼Œä¸”å¯ä»¥ä¼ å€¼ç»™shaderã€‚</p>
        <pre class="prettyprint showlinemods notranslate lang-js" translate="no">const vertexShader = `
  varying vec2 vUv;
  void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
  }
`;
</pre>
        <p>æŠŠvertexshaderä¼ ç»™<a href="/docs/#api/en/materials/ShaderMaterial"><code class="notranslate"
              translate="no">ShaderMaterial</code></a>ã€‚</p>
        <pre class="prettyprint showlinemods notranslate lang-js" translate="no">const material = new THREE.ShaderMaterial({
  vertexShader,
  fragmentShader,
  uniforms,
});
</pre>
        <p>å› ä¸º<code class="notranslate" translate="no">iResolution</code>ä¿æŒä¸å˜ï¼Œå› æ­¤å¯ä»¥åœ¨åˆå§‹åŒ–æ—¶è®¾å®šå®ƒçš„å€¼ã€‚</p>
        <pre class="prettyprint showlinemods notranslate lang-js" translate="no">const uniforms = {
  iTime: { value: 0 },
-  iResolution:  { value: new THREE.Vector3() },
+  iResolution:  { value: new THREE.Vector3(1, 1, 1) },
  iChannel0: { value: texture },
};
</pre>
        <p>åœ¨æ¸²æŸ“æ—¶æ— éœ€è®¾ç½®å®ƒçš„å€¼ã€‚</p>
        <pre class="prettyprint showlinemods notranslate lang-js" translate="no">-const canvas = renderer.domElement;
-uniforms.iResolution.value.set(canvas.width, canvas.height, 1);
uniforms.iTime.value = time;
</pre>
        <p>å¦å¤–æˆ‘ä»<a href="responsive.html">å…³äºå“åº”èƒ½åŠ›çš„æ–‡ç« </a>å¤åˆ¶äº†ä¸€æ®µ3ä¸ªæ—‹è½¬cubeä»£ç ã€‚æ•ˆæœå¦‚ä¸‹ï¼š</p>
        <p></p>
        <div translate="no" class="threejs_example_container notranslate">
          <div><iframe class="threejs_example notranslate" translate="no" style=" "
              src="/manual/examples/resources/editor.html?url=/manual/examples/shadertoy-as-texture.html"></iframe>
          </div>
          <a class="threejs_center" href="/manual/examples/shadertoy-as-texture.html" target="_blank">ç‚¹å‡»æ­¤å¤„åœ¨æ–°æ ‡ç­¾é¡µä¸­æ‰“å¼€</a>
        </div>

        <p></p>
        <p>å¸Œæœ›è¿™ç¯‡æ–‡å­—èƒ½è¯´æ¸…åœ¨three.jsä½¿ç”¨shadertoy shaderçš„å…¥é—¨æ–¹æ³•ã€‚å†æ¬¡é‡ç”³ï¼Œå¤§éƒ¨åˆ†çš„shadertoy
          shadersä¸å…¶è¯´æ˜¯æ€§èƒ½æ–¹é¢çš„æœ€ä½³å®è·µï¼Œä¸å¦‚ç§°å®ƒä»¬æ˜¯æœ‰è¶£çš„æŒ‘æˆ˜ï¼ˆé€šè¿‡å‡½æ•°å®ç°æ‰€æœ‰ç»˜åˆ¶ï¼‰ã€‚å°½ç®¡å¦‚æ­¤ï¼Œä»–ä»¬è¿˜æ˜¯æœ‰ç€ä»¤äººå°è±¡æ·±åˆ»çš„æƒŠè‰³å’Œç¾ï¼Œäº†è§£shaderå·¥ä½œåŸç†å¯ä»¥å­¦åˆ°å¾ˆå¤šä¸œè¥¿ã€‚</p>
      </div>
    </div>
  </div>

  <script src="../resources/prettify.js"></script>
  <script src="../resources/lesson.js"></script>




</body>

</html>
