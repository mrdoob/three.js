<!DOCTYPE html><html lang="zh"><head>
    <meta charset="utf-8">
    <title>æ‘„åƒæœº</title>
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@threejs">
    <meta name="twitter:title" content="Three.js â€“ æ‘„åƒæœº">
    <meta property="og:image" content="https://threejs.org/files/share.png">
    <link rel="shortcut icon" href="/files/favicon_white.ico" media="(prefers-color-scheme: dark)">
    <link rel="shortcut icon" href="/files/favicon.ico" media="(prefers-color-scheme: light)">

    <link rel="stylesheet" href="/manual/resources/lesson.css">
    <link rel="stylesheet" href="/manual/resources/lang.css">
<!-- Import maps polyfill -->
<!-- Remove this when import maps will be widely supported -->
<script async src="https://unpkg.com/es-module-shims@1.3.6/dist/es-module-shims.js"></script>

<script type="importmap">
{
  "imports": {
    "three": "../../build/three.module.js"
  }
}
</script>
    <link rel="stylesheet" href="/manual/zh/lang.css">
  </head>
  <body>
    <div class="container">
      <div class="lesson-title">
        <h1>æ‘„åƒæœº</h1>
      </div>
      <div class="lesson">
        <div class="lesson-main">
          <p>æœ¬æ–‡æ˜¯å…³äº three.js ç³»åˆ—æ–‡ç« çš„ä¸€éƒ¨åˆ†ã€‚ç¬¬ä¸€ç¯‡æ–‡ç« æ˜¯ <a href="fundamentals.html">three.js åŸºç¡€</a>ã€‚å¦‚æœä½ è¿˜æ²¡çœ‹è¿‡è€Œä¸”å¯¹three.js è¿˜ä¸ç†Ÿæ‚‰ï¼Œé‚£åº”è¯¥ä»é‚£é‡Œå¼€å§‹ï¼Œå¹¶ä¸”äº†è§£å¦‚ä½•<a href="setup.html">è®¾ç½®å¼€å‘ç¯å¢ƒ</a>ã€‚ä¸Šä¸€ç¯‡æ–‡ç« ä»‹ç»äº† three.js ä¸­çš„ <a href="textures.html">çº¹ç†</a>ã€‚</p>
<p>æˆ‘ä»¬å¼€å§‹è°ˆè°ˆthree.jsä¸­çš„æ‘„åƒæœº. æˆ‘ä»¬å·²ç»åœ¨<a href="fundamentals.html">ç¬¬ä¸€ç¯‡æ–‡ç« </a> ä¸­æ¶‰åŠåˆ°äº†æ‘„åƒæœºçš„ä¸€äº›çŸ¥è¯†, è¿™é‡Œæˆ‘ä»¬è¦æ›´æ·±å…¥ä¸€äº›. </p>
<p>åœ¨three.jsä¸­æœ€å¸¸ç”¨çš„æ‘„åƒæœºå¹¶ä¸”ä¹‹å‰æˆ‘ä»¬ä¸€ç›´ç”¨çš„æ‘„åƒæœºæ˜¯<code class="notranslate" translate="no">é€è§†æ‘„åƒæœº PerspectiveCamera</code>, å®ƒå¯ä»¥æä¾›ä¸€ä¸ªè¿‘å¤§è¿œå°çš„3Dè§†è§‰æ•ˆæœ. </p>
<p><a href="/docs/#api/zh/cameras/PerspectiveCamera"><code class="notranslate" translate="no">PerspectiveCamera</code></a> å®šä¹‰äº†ä¸€ä¸ª <em>è§†é”¥frustum</em>. <a href="https://en.wikipedia.org/wiki/Frustum"><em>frustum</em> æ˜¯ä¸€ä¸ªåˆ‡æ‰é¡¶çš„ä¸‰è§’é”¥æˆ–è€…è¯´å®å¿ƒé‡‘å­—å¡”å‹</a>.
è¯´åˆ°<em>å®å¿ƒä½“solid</em>, åœ¨è¿™é‡Œé€šå¸¸æ˜¯æŒ‡ä¸€ä¸ªç«‹æ–¹ä½“, ä¸€ä¸ªåœ†é”¥, ä¸€ä¸ªçƒ, ä¸€ä¸ªåœ†æŸ±æˆ–é”¥å°.</p>
<div class="spread">
  <div><div data-diagram="shapeCube"></div><div>ç«‹æ–¹ä½“</div></div>
  <div><div data-diagram="shapeCone"></div><div>åœ†é”¥</div></div>
  <div><div data-diagram="shapeSphere"></div><div>çƒ</div></div>
  <div><div data-diagram="shapeCylinder"></div><div>åœ†æŸ±</div></div>
  <div><div data-diagram="shapeFrustum"></div><div>é”¥å°</div></div>
</div>

<p>é‡æ–°è®²ä¸€éè¿™äº›ä¸œè¥¿æ˜¯å› ä¸ºæˆ‘å¥½ä¹…æ²¡æœ‰åœ¨æ„è¿‡äº†. å¾ˆå¤šä¹¦æˆ–è€…æ–‡ç« æåˆ°<em>é”¥å°</em>è¿™ä¸ªä¸œè¥¿çš„æ—¶å€™æˆ‘æ‰«ä¸€çœ¼å°±è¿‡å»äº†. å†äº†è§£ä¸€ä¸‹ä¸åŒå‡ ä½•ä½“ä¼šè®©ä¸‹é¢çš„ä¸€äº›è¡¨è¿°å˜å¾—æ›´ä¸ºæ„Ÿæ€§...å§ğŸ˜…</p>
<p><a href="/docs/#api/zh/cameras/PerspectiveCamera"><code class="notranslate" translate="no">PerspectiveCamera</code></a>é€šè¿‡å››ä¸ªå±æ€§æ¥å®šä¹‰ä¸€ä¸ªè§†é”¥. <code class="notranslate" translate="no">near</code>å®šä¹‰äº†è§†é”¥çš„å‰ç«¯, <code class="notranslate" translate="no">far</code>å®šä¹‰äº†åç«¯, <code class="notranslate" translate="no">fov</code>æ˜¯è§†é‡, é€šè¿‡è®¡ç®—æ­£ç¡®çš„é«˜åº¦æ¥ä»æ‘„åƒæœºçš„ä½ç½®è·å¾—æŒ‡å®šçš„ä»¥<code class="notranslate" translate="no">near</code>ä¸ºå•ä½çš„è§†é‡, å®šä¹‰çš„æ˜¯è§†é”¥çš„å‰ç«¯å’Œåç«¯çš„é«˜åº¦. <code class="notranslate" translate="no">aspect</code>é—´æ¥åœ°å®šä¹‰äº†è§†é”¥å‰ç«¯å’Œåç«¯çš„å®½åº¦, å®é™…ä¸Šè§†é”¥çš„å®½åº¦æ˜¯é€šè¿‡é«˜åº¦ä¹˜ä»¥aspectæ¥å¾—åˆ°çš„. </p>
<p><img src="../resources/frustum-3d.svg" width="500" class="threejs_center"></p>
<p>æˆ‘ä»¬å€Ÿç”¨<a href="lights.html">ä¸Šä¸€ç¯‡æ–‡ç« </a>çš„åœºæ™¯. å…¶ä¸­åŒ…å«ä¸€ä¸ªåœ°å¹³é¢, ä¸€ä¸ªçƒå’Œä¸€ä¸ªç«‹æ–¹ä½“, æˆ‘ä»¬å¯ä»¥åœ¨å…¶ä¸­è°ƒæ•´æ‘„åƒæœºçš„è®¾ç½®. 
Â·
æˆ‘ä»¬é€šè¿‡<code class="notranslate" translate="no">MinMaxGUIHelper</code>æ¥è°ƒæ•´<code class="notranslate" translate="no">near</code>, <code class="notranslate" translate="no">far</code>çš„è®¾ç½®. æ˜¾ç„¶<code class="notranslate" translate="no">near</code>åº”è¯¥æ€»æ˜¯æ¯”<code class="notranslate" translate="no">far</code>è¦å°. lil-guiæœ‰<code class="notranslate" translate="no">min</code>å’Œ<code class="notranslate" translate="no">max</code>ä¸¤ä¸ªå±æ€§å¯è°ƒ, ç„¶åè¿™ä¸¤ä¸ªå±æ€§å°†å†³å®šæ‘„åƒæœºçš„è®¾ç½®. </p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">class MinMaxGUIHelper {
  constructor(obj, minProp, maxProp, minDif) {
    this.obj = obj;
    this.minProp = minProp;
    this.maxProp = maxProp;
    this.minDif = minDif;
  }
  get min() {
    return this.obj[this.minProp];
  }
  set min(v) {
    this.obj[this.minProp] = v;
    this.obj[this.maxProp] = Math.max(this.obj[this.maxProp], v + this.minDif);
  }
  get max() {
    return this.obj[this.maxProp];
  }
  set max(v) {
    this.obj[this.maxProp] = v;
    this.min = this.min;  // è¿™å°†è°ƒç”¨minçš„setter
  }
}
</pre>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥å°†GUIè®¾ç½®ä¸º</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">function updateCamera() {
  camera.updateProjectionMatrix();
}

const gui = new GUI();
gui.add(camera, 'fov', 1, 180).onChange(updateCamera);
const minMaxGUIHelper = new MinMaxGUIHelper(camera, 'near', 'far', 0.1);
gui.add(minMaxGUIHelper, 'min', 0.1, 50, 0.1).name('near').onChange(updateCamera);
gui.add(minMaxGUIHelper, 'max', 0.1, 50, 0.1).name('far').onChange(updateCamera);
</pre>
<p>ä»»ä½•æ—¶å€™æ‘„åƒæœºçš„è®¾ç½®å˜åŠ¨, æˆ‘ä»¬éœ€è¦è°ƒç”¨æ‘„åƒæœºçš„<a href="/docs/#api/zh/cameras/PerspectiveCamera#updateProjectionMatrix"><code class="notranslate" translate="no">updateProjectionMatrix</code></a>æ¥æ›´æ–°è®¾ç½®. æˆ‘ä»¬å†™ä¸€ä¸ªå‡½æ•°<code class="notranslate" translate="no">updataCamera</code>, å½“lil-guiæ”¹å˜äº†å±æ€§çš„æ—¶å€™ä¼šè°ƒç”¨å®ƒæ¥æ›´æ–°å‚æ•°. </p>
<p></p><div translate="no" class="threejs_example_container notranslate">
  <div><iframe class="threejs_example notranslate" translate="no" style=" " src="/manual/examples/resources/editor.html?url=/manual/examples/cameras-perspective.html"></iframe></div>
  <a class="threejs_center" href="/manual/examples/cameras-perspective.html" target="_blank">ç‚¹å‡»æ­¤å¤„åœ¨æ–°æ ‡ç­¾é¡µä¸­æ‰“å¼€</a>
</div>

<p></p>
<p>ç°åœ¨å¯ä»¥è°ƒæ•´è¿™äº›æ•°å€¼æ¥è§‚å¯Ÿè¿™äº›å‚æ•°æ˜¯å¦‚ä½•å½±å“æ‘„åƒæœºçš„. æ³¨æ„æˆ‘ä»¬å¹¶æ²¡æœ‰æ”¹å˜<code class="notranslate" translate="no">aspect</code>, å› ä¸ºè¿™ä¸ªå‚æ•°æ¥è‡ªäºçª—å£çš„å¤§å°. å¦‚æœæƒ³è°ƒæ•´<code class="notranslate" translate="no">aspect</code>, åªéœ€è¦å¼€ä¸ªæ–°çª—å£ç„¶åè°ƒæ•´çª—å£å¤§å°å°±å¯ä»¥äº†. </p>
<p>å³ä¾¿æ˜¯è¿™æ ·, è§‚å¯Ÿå‚æ•°å¯¹è§†é‡çš„å½±å“è¿˜æ˜¯æŒºéº»çƒ¦çš„. æ‰€ä»¥æˆ‘ä»¬æ¥è®¾ç½®ä¸¤å°æ‘„åƒæœºå§! ä¸€å°æ˜¯è·Ÿä¸Šé¢ä¸€æ ·å±•ç°å‡ºæ‘„åƒæœºä¸­çœ‹åˆ°çš„å®é™…åœºæ™¯, å¦ä¸€ä¸ªåˆ™æ˜¯ç”¨æ¥è§‚å¯Ÿè¿™ä¸ªå®é™…å·¥ä½œçš„æ‘„åƒæœº, ç„¶åç”»å‡ºæ‘„åƒæœºçš„è§†é”¥. </p>
<p>æˆ‘ä»¬éœ€è¦ç”¨åˆ°three.jsçš„å‰ªå‡½æ•°(scissor function)æ¥ç”»ä¸¤ä¸ªåœºæ™¯å’Œä¸¤ä¸ªæ‘„åƒæœº. </p>
<p>é¦–å…ˆè®©æˆ‘ä»¬ç”¨HTMLå’ŒCSSæ¥å®šä¹‰ä¸¤ä¸ªè‚©å¹¶è‚©çš„å…ƒç´ . è¿™ä¹Ÿå°†å¸®åŠ©æˆ‘ä»¬å°†ä¸¤ä¸ªæ‘„åƒæœºèµ‹äºˆä¸åŒçš„<a href="/docs/#examples/controls/OrbitControls"><code class="notranslate" translate="no">OrbitControls</code></a>. </p>
<pre class="prettyprint showlinemods notranslate lang-html" translate="no">&lt;body&gt;
  &lt;canvas id="c"&gt;&lt;/canvas&gt;
+  &lt;div class="split"&gt;
+     &lt;div id="view1" tabindex="1"&gt;&lt;/div&gt;
+     &lt;div id="view2" tabindex="2"&gt;&lt;/div&gt;
+  &lt;/div&gt;
&lt;/body&gt;
</pre>
<p>CSSå°†æ§åˆ¶ä¸¤ä¸ªè§†çª—å¹¶æ’æ˜¾ç¤ºåœ¨canvasä¸­</p>
<pre class="prettyprint showlinemods notranslate lang-css" translate="no">.split {
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  display: flex;
}
.split&gt;div {
  width: 100%;
  height: 100%;
}
</pre>
<p>æ¥ä¸‹æ¥å°†æ·»åŠ ä¸€ä¸ª<a href="/docs/#api/zh/helpers/CameraHelper"><code class="notranslate" translate="no">CameraHelper</code></a>, å®ƒå¯ä»¥æŠŠæ‘„åƒæœºçš„è§†é”¥ç”»å‡ºæ¥</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">const cameraHelper = new THREE.CameraHelper(camera);

...

scene.add(cameraHelper);
</pre>
<p>æˆ‘ä»¬ç°åœ¨éœ€è¦æŸ¥æ‰¾åˆ°åˆšåˆšå®šä¹‰çš„ä¸¤ä¸ªå…ƒç´ </p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">const view1Elem = document.querySelector('#view1');
const view2Elem = document.querySelector('#view2');
</pre>
<p>ç°åœ¨åªç»™ç¬¬ä¸€ä¸ªè§†çª—ä¸­çš„æ‘„åƒæœºåˆ†é…<a href="/docs/#examples/controls/OrbitControls"><code class="notranslate" translate="no">OrbitControls</code></a></p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">-const controls = new OrbitControls(camera, canvas);
+const controls = new OrbitControls(camera, view1Elem);
</pre>
<p>æˆ‘ä»¬å®šä¹‰ç¬¬äºŒä¸ª<a href="/docs/#api/zh/cameras/PerspectiveCamera"><code class="notranslate" translate="no">PerspectiveCamera</code></a>å’Œ<a href="/docs/#examples/controls/OrbitControls"><code class="notranslate" translate="no">OrbitControls</code></a>. </p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">const camera2 = new THREE.PerspectiveCamera(
  60,  // fov
  2,   // aspect
  0.1, // near
  500, // far
);
camera2.position.set(40, 10, 30);
camera2.lookAt(0, 5, 0);

const controls2 = new OrbitControls(camera2, view2Elem);
controls2.target.set(0, 5, 0);
controls2.update();
</pre>
<p>æœ€åæˆ‘ä»¬éœ€è¦</p>
<p>æœ€åï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨å‰ªåˆ€åŠŸèƒ½ä»æ¯ä¸ªæ‘„å½±æœºçš„è§†è§’æ¸²æŸ“åœºæ™¯ï¼Œä»¥ä»…æ¸²æŸ“ç”»å¸ƒçš„ä¸€éƒ¨åˆ†ã€‚
è¿™ä¸ªå‡½æ•°æ¥å—ä¸€ä¸ªå…ƒç´ , è®¡ç®—è¿™ä¸ªå…ƒç´ åœ¨canvasä¸Šçš„é‡å é¢ç§¯, è¿™å°†è®¾ç½®å‰ªåˆ€å‡½æ•°å’Œè§†è§’é•¿å®½å¹¶è¿”å›aspect</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">function setScissorForElement(elem) {
  const canvasRect = canvas.getBoundingClientRect();
  const elemRect = elem.getBoundingClientRect();

  // è®¡ç®—canvasçš„å°ºå¯¸
  const right = Math.min(elemRect.right, canvasRect.right) - canvasRect.left;
  const left = Math.max(0, elemRect.left - canvasRect.left);
  const bottom = Math.min(elemRect.bottom, canvasRect.bottom) - canvasRect.top;
  const top = Math.max(0, elemRect.top - canvasRect.top);

  const width = Math.min(canvasRect.width, right - left);
  const height = Math.min(canvasRect.height, bottom - top);

  // è®¾ç½®å‰ªå‡½æ•°ä»¥ä»…æ¸²æŸ“ä¸€éƒ¨åˆ†åœºæ™¯
  const positiveYUpBottom = canvasRect.height - bottom;
  renderer.setScissor(left, positiveYUpBottom, width, height);
  renderer.setViewport(left, positiveYUpBottom, width, height);

  // è¿”å›aspect
  return width / height;
}
</pre>
<p>æˆ‘ä»¬ç”¨è¿™ä¸ªå‡½æ•°åœ¨<code class="notranslate" translate="no">render</code>ä¸­ç»˜åˆ¶ä¸¤éåœºæ™¯</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">  function render() {

-    if (resizeRendererToDisplaySize(renderer)) {
-      const canvas = renderer.domElement;
-      camera.aspect = canvas.clientWidth / canvas.clientHeight;
-      camera.updateProjectionMatrix();
-    }

+    resizeRendererToDisplaySize(renderer);
+
+    // å¯ç”¨å‰ªåˆ€å‡½æ•°
+    renderer.setScissorTest(true);
+
+    // æ¸²æŸ“ä¸»è§†é‡
+    {
+      const aspect = setScissorForElement(view1Elem);
+
+      // ç”¨è®¡ç®—å‡ºçš„aspectä¿®æ”¹æ‘„åƒæœºå‚æ•°
+      camera.aspect = aspect;
+      camera.updateProjectionMatrix();
+      cameraHelper.update();
+
+      // æ¥åŸè§†é‡ä¸­ä¸è¦ç»˜åˆ¶cameraHelper
+      cameraHelper.visible = false;
+
+      scene.background.set(0x000000);
+
+      // æ¸²æŸ“
+      renderer.render(scene, camera);
+    }
+
+    // æ¸²æŸ“ç¬¬äºŒå°æ‘„åƒæœº
+    {
+      const aspect = setScissorForElement(view2Elem);
+
+      // è°ƒæ•´aspect
+      camera2.aspect = aspect;
+      camera2.updateProjectionMatrix();
+
+      // åœ¨ç¬¬äºŒå°æ‘„åƒæœºä¸­ç»˜åˆ¶cameraHelper
+      cameraHelper.visible = true;
+
+      scene.background.set(0x000040);
+
+      renderer.render(scene, camera2);
+    }

-    renderer.render(scene, camera);

    requestAnimationFrame(render);
  }

  requestAnimationFrame(render);
}
</pre>
<p>ä¸Šé¢çš„ä»£ç è¿˜å°†ä¸»è¾…æ‘„åƒæœºçš„èƒŒæ™¯è‰²åŒºåˆ†å¼€ä»¥åˆ©è§‚å¯Ÿ. </p>
<p>æˆ‘ä»¬å¯ä»¥ç§»é™¤<code class="notranslate" translate="no">updateCamera</code>äº†, å› ä¸ºæ‰€æœ‰çš„ä¸œè¥¿åœ¨<code class="notranslate" translate="no">render</code>ä¸­æ›´æ–°è¿‡äº†.</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">-function updateCamera() {
-  camera.updateProjectionMatrix();
-}

const gui = new GUI();
-gui.add(camera, 'fov', 1, 180).onChange(updateCamera);
+gui.add(camera, 'fov', 1, 180);
const minMaxGUIHelper = new MinMaxGUIHelper(camera, 'near', 'far', 0.1);
-gui.add(minMaxGUIHelper, 'min', 0.1, 50, 0.1).name('near').onChange(updateCamera);
-gui.add(minMaxGUIHelper, 'max', 0.1, 50, 0.1).name('far').onChange(updateCamera);
+gui.add(minMaxGUIHelper, 'min', 0.1, 50, 0.1).name('near');
+gui.add(minMaxGUIHelper, 'max', 0.1, 50, 0.1).name('far');
</pre>
<p>ç°åœ¨æˆ‘ä»¬å°±å¯ä»¥åœ¨è¾…æ‘„åƒæœºä¸­è§‚å¯Ÿåˆ°ä¸»æ‘„åƒæœºçš„è§†é”¥è½®å»“äº†. </p>
<p></p><div translate="no" class="threejs_example_container notranslate">
  <div><iframe class="threejs_example notranslate" translate="no" style=" " src="/manual/examples/resources/editor.html?url=/manual/examples/cameras-perspective-2-scenes.html"></iframe></div>
  <a class="threejs_center" href="/manual/examples/cameras-perspective-2-scenes.html" target="_blank">ç‚¹å‡»æ­¤å¤„åœ¨æ–°æ ‡ç­¾é¡µä¸­æ‰“å¼€</a>
</div>

<p></p>
<p>å·¦ä¾§å¯ä»¥çœ‹åˆ°ä¸»æ‘„åƒæœºçš„è§†è§’, å³ä¾§åˆ™æ˜¯è¾…æ‘„åƒæœºè§‚å¯Ÿä¸»æ‘„åƒæœºå’Œä¸»æ‘„åƒæœºçš„è§†é”¥è½®å»“. å¯ä»¥è°ƒæ•´<code class="notranslate" translate="no">near</code>, <code class="notranslate" translate="no">far</code>, <code class="notranslate" translate="no">fov</code>å’Œç”¨é¼ æ ‡ç§»åŠ¨æ‘„åƒæœºæ¥è§‚å¯Ÿè§†é”¥è½®å»“å’Œåœºæ™¯ä¹‹é—´çš„å…³ç³». </p>
<p>å°†<code class="notranslate" translate="no">near</code>è°ƒæ•´åˆ°å¤§æ¦‚20å·¦å³, å‰æ™¯å°±ä¼šåœ¨è§†é”¥ä¸­æ¶ˆå¤±. <code class="notranslate" translate="no">far</code>ä½äº35æ—¶, è¿œæ™¯ä¹Ÿä¸å¤å­˜åœ¨. </p>
<p>è¿™å¸¦æ¥ä¸€ä¸ªé—®é¢˜, ä¸ºä»€ä¹ˆä¸æŠŠ<code class="notranslate" translate="no">near</code>è®¾ç½®åˆ°0.0000000001ç„¶åå°†<code class="notranslate" translate="no">far</code>è®¾ç½®æˆ100000000, ä½¿å¾—ä¸€åˆ‡éƒ½å¯ä»¥å°½æ”¶çœ¼åº•? åŸå› æ˜¯ä½ çš„GPU 8å¤ªè¡Œ, æ²¡æœ‰è¶³å¤Ÿçš„ç²¾åº¦æ¥å†³å®šä»€ä¹ˆåœ¨å‰ä»€ä¹ˆåœ¨å. æ›´ç³Ÿçš„æ˜¯, åœ¨é»˜è®¤æƒ…å†µä¸‹, ç¦»æ‘„åƒæœºè¿‘çš„å°†ä¼šæ›´æ¸…æ™°, è¿œçš„æ¨¡ç³Š, ä»<code class="notranslate" translate="no">near</code>åˆ°<code class="notranslate" translate="no">far</code>é€æ¸è¿‡æ¸¡. </p>
<p>ä»ä¸Šé¢çš„ä¾‹å­å‡ºå‘, æˆ‘ä»¬å‘åœºæ™¯ä¸­æ·»åŠ 20ä¸ªçƒ</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">{
  const sphereRadius = 3;
  const sphereWidthDivisions = 32;
  const sphereHeightDivisions = 16;
  const sphereGeo = new THREE.SphereBufferGeometry(sphereRadius, sphereWidthDivisions, sphereHeightDivisions);
  const numSpheres = 20;
  for (let i = 0; i &lt; numSpheres; ++i) {
    const sphereMat = new THREE.MeshPhongMaterial();
    sphereMat.color.setHSL(i * .73, 1, 0.5);
    const mesh = new THREE.Mesh(sphereGeo, sphereMat);
    mesh.position.set(-sphereRadius - 1, sphereRadius + 2, i * sphereRadius * -2.2);
    scene.add(mesh);
  }
}
</pre>
<p>æŠŠ <code class="notranslate" translate="no">near</code> è®¾ç½®æˆ0.00001</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">const fov = 45;
const aspect = 2;  // canvas é»˜è®¤
-const near = 0.1;
+const near = 0.00001;
const far = 100;
const camera = new THREE.PerspectiveCamera(fov, aspect, near, far);
</pre>
<p>è°ƒæ•´ä¸€ä¸‹GUIä½¿å¾—èƒ½è®¾ç½®åˆ°0.00001</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">-gui.add(minMaxGUIHelper, 'min', 0.1, 50, 0.1).name('near').onChange(updateCamera);
+gui.add(minMaxGUIHelper, 'min', 0.00001, 50, 0.00001).name('near').onChange(updateCamera);
</pre>
<p>ä½ è§‰å¾—ä¼šå‘ç”Ÿä»€ä¹ˆ?</p>
<p></p><div translate="no" class="threejs_example_container notranslate">
  <div><iframe class="threejs_example notranslate" translate="no" style=" " src="/manual/examples/resources/editor.html?url=/manual/examples/cameras-z-fighting.html"></iframe></div>
  <a class="threejs_center" href="/manual/examples/cameras-z-fighting.html" target="_blank">ç‚¹å‡»æ­¤å¤„åœ¨æ–°æ ‡ç­¾é¡µä¸­æ‰“å¼€</a>
</div>

<p></p>
<p>è¿™å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„<em>zå†²çª</em>çš„ä¾‹å­. GPUæ²¡æœ‰è¶³å¤Ÿçš„ç²¾åº¦æ¥å†³å®šå“ªä¸ªåƒç´ åœ¨å‰å“ªä¸ªåœ¨å. </p>
<p>ä»¥é˜²ä½ çš„æœºå™¨å¤ªå¥½å‡ºç°ä¸äº†æˆ‘è¯´çš„æƒ…å†µ, æˆ‘æŠŠæˆ‘çœ‹åˆ°çš„æˆªå›¾æ”¾åœ¨è¿™</p>
<div class="threejs_center"><img src="../resources/images/z-fighting.png" style="width: 570px;"></div>

<p>è§£å†³çš„æ–¹æ³•ä¹‹ä¸€æ˜¯å‘Šè¯‰three.jsä½¿ç”¨ä¸åŒçš„æ–¹æ³•è®¡ç®—åƒç´ çš„å‰åå…³ç³». æˆ‘ä»¬å¯ä»¥åœ¨åˆ›å»º<a href="/docs/#api/zh/renderers/WebGLRenderer"><code class="notranslate" translate="no">WebGLRenderer</code></a>æ—¶å¼€å¯<code class="notranslate" translate="no">logarithmicDepthBuffer</code></p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">-const renderer = new THREE.WebGLRenderer({canvas});
+const renderer = new THREE.WebGLRenderer({
+  canvas,
+  logarithmicDepthBuffer: true,
+});
</pre>
<p>è¿™çœ‹èµ·æ¥å°±è¡Œäº†</p>
<p></p><div translate="no" class="threejs_example_container notranslate">
  <div><iframe class="threejs_example notranslate" translate="no" style=" " src="/manual/examples/resources/editor.html?url=/manual/examples/cameras-logarithmic-depth-buffer.html"></iframe></div>
  <a class="threejs_center" href="/manual/examples/cameras-logarithmic-depth-buffer.html" target="_blank">ç‚¹å‡»æ­¤å¤„åœ¨æ–°æ ‡ç­¾é¡µä¸­æ‰“å¼€</a>
</div>

<p></p>
<p>å¦‚æœè¿™ä¸è¡Œçš„è¯, é‚£ä½ å°±é‡åˆ°äº†<em>ä¸ºä»€ä¹ˆä¸èƒ½æ— è„‘ä½¿ç”¨è¿™ç§è§£å†³æ–¹æ¡ˆ</em>çš„æƒ…å†µäº†. åˆ°2018å¹´9æœˆ, ç»å¤§å¤šæ•°å°å¼æœºå¯ä»¥ä½†æ˜¯å‡ ä¹æ²¡æœ‰ç§»åŠ¨è®¾å¤‡æ”¯æŒè¿™ä¸ªåŠŸèƒ½. </p>
<p>å¦ä¸€ä¸ªæœ€å¥½åˆ«ç”¨è¿™ç§è§£å†³æ–¹æ¡ˆçš„åŸå› æ˜¯è¿™ä¼šå¤§å¤§é™ä½è¿è¡Œé€Ÿåº¦. </p>
<p>å³ä¾¿æ˜¯ç°åœ¨è·‘å¾—å¥½å¥½åœ°, é€‰æ‹©å¤ªå°çš„<code class="notranslate" translate="no">near</code>å’Œå¤ªå¤§çš„<code class="notranslate" translate="no">far</code>æœ€ç»ˆä¹Ÿä¼šé‡åˆ°åŒæ ·çš„é—®é¢˜. </p>
<p>æ‰€ä»¥è¯´ä½ éœ€è¦é€‰æ‹©å¥½å¥½æŠ‰æ‹©<code class="notranslate" translate="no">near</code>å’Œ<code class="notranslate" translate="no">far</code>çš„è®¾ç½®, æ¥å’Œä½ çš„åœºæ™¯é…åˆ. æ—¢ä¸ä¸¢å¤±é‡è¦çš„è¿‘æ™¯, ä¹Ÿä¸è®©è¿œå¤„çš„ä¸œè¥¿æ¶ˆå¤±ä¸è§. å¦‚æœä½ æƒ³æ¸²æŸ“ä¸€ä¸ªå·¨å¤§çš„åœºæ™¯, ä¸ä½†èƒ½çœ‹æ¸…é¢å‰çš„äººçš„çœ¼ç«æ¯›åˆæƒ³çœ‹åˆ°50å…¬é‡Œä»¥å¤–çš„ç©æ„, ä½ å¾—è‡ªå·±æƒ³ä¸€ä¸ª<em>å‰å®³çš„</em>æ–¹æ¡ˆ, è¿™é‡Œå°±ä¸æ¶‰åŠäº†. ç°åœ¨, å¥½å¥½åœ°é€‰ä¸ªéœ€è¦çš„å‚æ•°å°±è¡Œ. </p>
<p>ç¬¬äºŒç§å¸¸è§çš„æ‘„åƒæœºæ˜¯<code class="notranslate" translate="no">æ­£äº¤æ‘„åƒæœº OrthographicCamera</code>, å’ŒæŒ‡å®šä¸€ä¸ªè§†é”¥ä¸åŒçš„æ˜¯, å®ƒéœ€è¦è®¾ç½®<code class="notranslate" translate="no">left</code>, <code class="notranslate" translate="no">right</code>
<code class="notranslate" translate="no">top</code>, <code class="notranslate" translate="no">bottom</code>, <code class="notranslate" translate="no">near</code>, å’Œ<code class="notranslate" translate="no">far</code>æŒ‡å®šä¸€ä¸ªé•¿æ–¹ä½“, ä½¿å¾—è§†é‡æ˜¯å¹³è¡Œçš„è€Œä¸æ˜¯é€è§†çš„. </p>
<p>æˆ‘ä»¬æ¥æŠŠä¸Šé¢çš„ä¾‹å­æ”¹æˆ<a href="/docs/#api/zh/cameras/OrthographicCamera"><code class="notranslate" translate="no">OrthographicCamera</code></a>, é¦–å…ˆæ¥è®¾ç½®æ‘„åƒæœº</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">const left = -1;
const right = 1;
const top = 1;
const bottom = -1;
const near = 5;
const far = 50;
const camera = new THREE.OrthographicCamera(left, right, top, bottom, near, far);
camera.zoom = 0.2;
</pre>
<p>æˆ‘ä»¬å°†<code class="notranslate" translate="no">left</code>å’Œ<code class="notranslate" translate="no">bottom</code>è®¾ç½®æˆ -1 <code class="notranslate" translate="no">right</code> å’Œ <code class="notranslate" translate="no">top</code>è®¾æˆ 1, è¿™æ ·å°±ä½¿ç›’å­å®½ä¸ºä¸¤ä¸ªå•ä½, é«˜ä¸¤ä¸ªå•ä½. æˆ‘ä»¬æ¥ä¸‹æ¥é€šè¿‡è°ƒæ•´<code class="notranslate" translate="no">left</code>å’Œ<code class="notranslate" translate="no">top</code>æ¥é€‰æ‹©å…¶aspect. æˆ‘ä»¬å°†ç”¨<code class="notranslate" translate="no">zoom</code>å±æ€§æ¥è°ƒæ•´ç›¸æœºåˆ°åº•å±•ç°å¤šå°‘çš„å•ä½å¤§å°. </p>
<p>ç»™GUIæ·»åŠ <code class="notranslate" translate="no">zoom</code>è®¾ç½®</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">const gui = new GUI();
+gui.add(camera, 'zoom', 0.01, 1, 0.01).listen();
</pre>
<p><code class="notranslate" translate="no">listen</code>è°ƒç”¨å‘Šè¯‰lil-guiå»ç›‘è§†å±æ€§çš„å˜åŒ–. å†™åœ¨è¿™é‡Œæ˜¯å› ä¸º<a href="/docs/#examples/controls/OrbitControls"><code class="notranslate" translate="no">OrbitControls</code></a>åŒæ ·å¯ä»¥æ§åˆ¶ç¼©æ”¾. åœ¨è¿™ä¸ªä¾‹å­ä¸­, é¼ æ ‡æ»šè½®å°†ä¼šé€šè¿‡<a href="/docs/#examples/controls/OrbitControls"><code class="notranslate" translate="no">OrbitControls</code></a>æ§ä»¶æ¥æ§åˆ¶ç¼©æ”¾. </p>
<p>æœ€åæ›´æ”¹aspectç„¶åæ›´æ–°æ‘„åƒæœº</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">{
  const aspect = setScissorForElement(view1Elem);

  // ä½¿ç”¨aspectæ›´æ–°æ‘„åƒæœº
-  camera.aspect = aspect;
+  camera.left   = -aspect;
+  camera.right  =  aspect;
  camera.updateProjectionMatrix();
  cameraHelper.update();

  // åœ¨ä¸»æ‘„åƒæœºä¸­ä¸ç»˜åˆ¶è§†é‡è¾…åŠ©çº¿
  cameraHelper.visible = false;

  scene.background.set(0x000000);
  renderer.render(scene, camera);
}
</pre>
<p>ç°åœ¨å°±å¯ä»¥çœ‹åˆ°<a href="/docs/#api/zh/cameras/OrthographicCamera"><code class="notranslate" translate="no">OrthographicCamera</code></a>å·¥ä½œäº†. </p>
<p></p><div translate="no" class="threejs_example_container notranslate">
  <div><iframe class="threejs_example notranslate" translate="no" style=" " src="/manual/examples/resources/editor.html?url=/manual/examples/cameras-orthographic-2-scenes.html"></iframe></div>
  <a class="threejs_center" href="/manual/examples/cameras-orthographic-2-scenes.html" target="_blank">ç‚¹å‡»æ­¤å¤„åœ¨æ–°æ ‡ç­¾é¡µä¸­æ‰“å¼€</a>
</div>

<p></p>
<p>å¤§å¤šæ•°æƒ…å†µä¸‹, ç»˜åˆ¶2Då›¾åƒçš„æ—¶å€™ä¼šç”¨åˆ°<a href="/docs/#api/zh/cameras/OrthographicCamera"><code class="notranslate" translate="no">OrthographicCamera</code></a>. ä½ å¯ä»¥è‡ªå·±å†³å®šæ‘„åƒæœºçš„è§†é‡å¤§å°. æ¯”å¦‚è¯´ä½ æƒ³è®©canvasçš„ä¸€ä¸ªåƒç´ åŒ¹é…æ‘„åƒæœºçš„ä¸€ä¸ªå•ä½, ä½ å¯ä»¥è¿™ä¹ˆåš</p>
<p>å°†åŸç‚¹ç½®äºä¸­å¿ƒ, ä»¤ä¸€ä¸ªåƒç´ ç­‰äºä¸€ä¸ªå•ä½</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">camera.left = -canvas.width / 2;
camera.right = canvas.width / 2;
camera.top = canvas.height / 2;
camera.bottom = -canvas.height / 2;
camera.near = -1;
camera.far = 1;
camera.zoom = 1;
</pre>
<p>æˆ–è€…å¦‚æœæˆ‘ä»¬æƒ³è®©åŸç‚¹åœ¨å·¦ä¸Š, å°±åƒæ˜¯2D canvas</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">camera.left = 0;
camera.right = canvas.width;
camera.top = 0;
camera.bottom = canvas.height;
camera.near = -1;
camera.far = 1;
camera.zoom = 1;
</pre>
<p>è¿™æ ·å·¦ä¸Šè§’å°±æˆäº†0,0</p>
<p>è¯•è¯•, è¿™æ ·è®¾ç½®æ‘„åƒæœº</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">const left = 0;
const right = 300;  // é»˜è®¤çš„canvaså¤§å°
const top = 0;
const bottom = 150;  // é»˜è®¤çš„canvaså¤§å°
const near = -1;
const far = 1;
const camera = new THREE.OrthographicCamera(left, right, top, bottom, near, far);
camera.zoom = 1;
</pre>
<p>ç„¶åæˆ‘ä»¬è½½å…¥å…­ä¸ªæè´¨, ç”Ÿæˆå…­ä¸ªå¹³é¢, ä¸€ä¸€å¯¹åº”. æŠŠæ¯ä¸€ä¸ªå¹³é¢ç»‘å®šåˆ°çˆ¶å¯¹è±¡<a href="/docs/#api/zh/core/Object3D"><code class="notranslate" translate="no">THREE.Object3D</code></a>ä¸Š, ä»¥ä¾¿è°ƒæ•´æ¯ä¸ªå¹³é¢å’Œå·¦ä¸Šè§’åŸç‚¹çš„ç›¸å¯¹å…³ç³»</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">const loader = new THREE.TextureLoader();
const textures = [
  loader.load('resources/images/flower-1.jpg'),
  loader.load('resources/images/flower-2.jpg'),
  loader.load('resources/images/flower-3.jpg'),
  loader.load('resources/images/flower-4.jpg'),
  loader.load('resources/images/flower-5.jpg'),
  loader.load('resources/images/flower-6.jpg'),
];
const planeSize = 256;
const planeGeo = new THREE.PlaneGeometry(planeSize, planeSize);
const planes = textures.map((texture) =&gt; {
  const planePivot = new THREE.Object3D();
  scene.add(planePivot);
  texture.magFilter = THREE.NearestFilter;
  const planeMat = new THREE.MeshBasicMaterial({
    map: texture,
    side: THREE.DoubleSide,
  });
  const mesh = new THREE.Mesh(planeGeo, planeMat);
  planePivot.add(mesh);
  // è°ƒæ•´å¹³é¢ä½¿å¾—å·¦ä¸Šè§’ä¸ºåŸç‚¹
  mesh.position.set(planeSize / 2, planeSize / 2, 0);
  return planePivot;
});
</pre>
<p>ç„¶åå½“canvasæ›´æ–°åæˆ‘ä»¬æ›´æ–°æ‘„åƒæœºè®¾ç½®</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">function render() {

  if (resizeRendererToDisplaySize(renderer)) {
    camera.right = canvas.width;
    camera.bottom = canvas.height;
    camera.updateProjectionMatrix();
  }

  ...
</pre>
<p><code class="notranslate" translate="no">planes</code> æ˜¯<a href="/docs/#api/zh/objects/Mesh"><code class="notranslate" translate="no">THREE.Mesh</code></a>çš„æ•°ç»„, æ¯ä¸€ä¸ªå¯¹åº”ä¸€ä¸ªå¹³é¢. 
ç°åœ¨è®©å®ƒéšç€æ—¶é—´ç§»åŠ¨</p>
<pre class="prettyprint showlinemods notranslate lang-js" translate="no">function render(time) {
  time *= 0.001;  // è½¬æ¢ä¸ºç§’;

  ...

  const distAcross = Math.max(20, canvas.width - planeSize);
  const distDown = Math.max(20, canvas.height - planeSize);

  // æ¥å›è¿åŠ¨çš„æ€»è·ç¦»
  const xRange = distAcross * 2;
  const yRange = distDown * 2;
  const speed = 180;

  planes.forEach((plane, ndx) =&gt; {
    // ä¸ºæ¯ä¸ªå¹³é¢å•ç‹¬è®¡ç®—æ—¶é—´
    const t = time * speed + ndx * 300;

    // åœ¨0åˆ°æœ€è¿œè·ç¦»ä¹‹é—´è·å–ä¸€ä¸ªå€¼
    const xt = t % xRange;
    const yt = t % yRange;

    // 0åˆ°è·ç¦»çš„ä¸€åŠ, å‘å‰è¿åŠ¨
    // å¦ä¸€åŠçš„æ—¶å€™å¾€å›è¿åŠ¨
    const x = xt &lt; distAcross ? xt : xRange - xt;
    const y = yt &lt; distDown   ? yt : yRange - yt;

    plane.position.set(x, y, 0);
  });

  renderer.render(scene, camera);
</pre>
<p>ä½ å¯ä»¥çœ‹åˆ°å›¾ç‰‡åœ¨å…¶ä¸­å¼¹è·³, å’Œè¾¹é™…å®Œç¾å¥‘åˆ, å°±æ˜¯2D canvasçš„æ•ˆæœä¸€æ ·</p>
<p></p><div translate="no" class="threejs_example_container notranslate">
  <div><iframe class="threejs_example notranslate" translate="no" style=" " src="/manual/examples/resources/editor.html?url=/manual/examples/cameras-orthographic-canvas-top-left-origin.html"></iframe></div>
  <a class="threejs_center" href="/manual/examples/cameras-orthographic-canvas-top-left-origin.html" target="_blank">ç‚¹å‡»æ­¤å¤„åœ¨æ–°æ ‡ç­¾é¡µä¸­æ‰“å¼€</a>
</div>

<p></p>
<p>å¦ä¸€ä¸ªå¸¸è§çš„ç”¨é€”æ˜¯ç”¨<a href="/docs/#api/zh/cameras/OrthographicCamera"><code class="notranslate" translate="no">OrthographicCamera</code></a>æ¥å±•ç¤ºæ¨¡å‹çš„ä¸‰è§†å›¾.</p>
<div class="threejs_center"><img src="../resources/images/quad-viewport.png" style="width: 574px;"></div>

<p>ä¸Šé¢çš„æˆªå›¾å±•ç¤ºäº†ä¸€ä¸ªé€è§†å›¾å’Œä¸‰ä¸ªæ­£äº¤è§†è§’.</p>
<p>è¿™å°±æ˜¯æ‘„åƒæœºçš„åŸºç¡€. æˆ‘ä»¬åœ¨å…¶ä»–çš„æ–‡ç« ä¸­ä¼šä»‹ç»å¦å¤–çš„ä¸€äº›æ‘„åƒæœºç”¨æ³•. ç°åœ¨, æˆ‘ä»¬ç§»æ­¥åˆ°<a href="shadows.html">é˜´å½±</a>.</p>
<p><canvas id="c"></canvas></p>
<script type="module" src="../resources/threejs-cameras.js"></script>

        </div>
      </div>
    </div>
  
  <script src="/manual/resources/prettify.js"></script>
  <script src="/manual/resources/lesson.js"></script>




</body></html>