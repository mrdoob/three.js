<!DOCTYPE html>
<html lang="en">
<head>
	<title>three.js - Visual Shader Debugger (Standalone)</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
	<link type="text/css" rel="stylesheet" href="main.css">
	<style>
		body {
			margin: 0;
			overflow: hidden;
			background: linear-gradient(135deg, #0d0d0d 0%, #1a1a2e 50%, #16213e 100%);
		}
		#info {
			position: fixed;
			top: 10px;
			left: 50%;
			transform: translateX(-50%);
			background: rgba(30, 30, 30, 0.9);
			padding: 10px 20px;
			border-radius: 8px;
			font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
			font-size: 12px;
			color: #ddd;
			z-index: 100;
			pointer-events: none;
		}
		#info a { color: #0af; text-decoration: none; }
		#toggle-btn {
			position: fixed;
			bottom: 20px;
			left: 20px;
			padding: 12px 24px;
			background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
			border: none;
			border-radius: 8px;
			color: white;
			font-size: 14px;
			font-weight: 600;
			cursor: pointer;
			z-index: 10001;
			box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
			transition: transform 0.2s, box-shadow 0.2s;
		}
		#toggle-btn:hover {
			transform: translateY(-2px);
			box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
		}
	</style>
</head>
<body>
	<div id="info">
		<strong>Visual Shader Debugger</strong> - 
		<a href="https://threejs.org" target="_blank">three.js</a> |
		Click "Open Debugger" to start
	</div>
	<button id="toggle-btn">ðŸŽ¨ Open Debugger</button>

	<script type="importmap">
	{
		"imports": {
			"three": "../build/three.module.js",
			"three/addons/": "./jsm/"
		}
	}
	</script>

	<script type="module">

		import * as THREE from 'three';
		import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
		import { ShaderDebuggerUI } from 'three/addons/debug/ShaderDebuggerUI.js';

		let camera, scene, renderer, controls;
		let debuggerUI;

		init();
		animate();

		function init() {

			// Scene
			scene = new THREE.Scene();

			// Camera
			camera = new THREE.PerspectiveCamera( 70, window.innerWidth / window.innerHeight, 0.1, 1000 );
			camera.position.set( 2, 2, 4 );

			// Renderer
			renderer = new THREE.WebGLRenderer( { antialias: true } );
			renderer.setPixelRatio( window.devicePixelRatio );
			renderer.setSize( window.innerWidth, window.innerHeight );
			renderer.setClearColor( 0x0d0d0d );
			document.body.appendChild( renderer.domElement );

			// Controls
			controls = new OrbitControls( camera, renderer.domElement );
			controls.enableDamping = false;
			controls.target.set( 0, 0, 0 );
			controls.update();

			// Grid helper
			const grid = new THREE.GridHelper( 10, 10, 0x333333, 0x222222 );
			scene.add( grid );

			// Ambient light for models
			const ambient = new THREE.AmbientLight( 0x404040 );
			scene.add( ambient );

			const directional = new THREE.DirectionalLight( 0xffffff, 0.5 );
			directional.position.set( 5, 5, 5 );
			scene.add( directional );

			// Initialize Shader Debugger UI
			debuggerUI = new ShaderDebuggerUI( {
				position: 'right',
				width: 420
			} );

			debuggerUI.init( renderer, scene, camera, controls );

			// Toggle button
			const toggleBtn = document.getElementById( 'toggle-btn' );
			toggleBtn.addEventListener( 'click', () => {

				debuggerUI.toggle();
				toggleBtn.textContent = debuggerUI.isVisible ? 'âŒ Close Debugger' : 'ðŸŽ¨ Open Debugger';

			} );

			// Window resize
			window.addEventListener( 'resize', onWindowResize );

		}

		function onWindowResize() {

			camera.aspect = window.innerWidth / window.innerHeight;
			camera.updateProjectionMatrix();
			renderer.setSize( window.innerWidth, window.innerHeight );

		}

		function animate() {

			requestAnimationFrame( animate );

			// Update time uniforms on all materials
			const time = performance.now() * 0.001;

			debuggerUI.materialLibrary.forEach( entry => {

				if ( entry.material.uniforms?.time ) {

					entry.material.uniforms.time.value = time;

				}

			} );

			// Update debugger (for profiling)
			debuggerUI.update();

			// Update controls
			controls.update();

			// Render
			renderer.render( scene, camera );

		}

	</script>
</body>
</html>

